(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){

},{}],2:[function(require,module,exports){
module.exports=require("./lib");
},{"./lib":3}],3:[function(require,module,exports){
!function(e){"use strict";module.exports=function(t,n){return t&&("object"!=typeof t||Object.keys(t).length)?t:e&&"string"==typeof n?e[n]:void 0}}("undefined"!=typeof window?window:null);
},{}],4:[function(require,module,exports){
!function(){"use strict";var e=require("xp-load"),r=e(require("expandjs"),"XP");module.exports=function(e,t){return r.isObject(t)?(r.forOwn(e,function(n,u){r.has(t,u)&&t[u].immutable&&delete e[u]}),e):e}}();
},{"expandjs":1,"xp-load":2}],5:[function(require,module,exports){
!function(){"use strict";var t=require("./filter"),e=require("./sanitize"),i=require("./validate"),n=require("xp-load"),s=n(require("expandjs"),"XP"),r=function(t){return s.has(t,"input")||s.has(t,"options")},u=function(t,e){return t=s.assign({handle:e},t),s.withdraw(t,"method"),t},o=s.freeze(s.keys(i.types)),a=s.freeze(s.filter(s.map(e.sanitizers,u),r)),l=s.freeze(s.filter(s.map(i.validators,u),r));module.exports=new s.Class("XPSchema",{options:{id:"",fields:null,strict:!1,useful:!1},initialize:function(t){var e=this;e.options=t,e.id=e.options.id,e.fields=e.options.fields||{},e.strict=e.options.strict,e.useful=e.options.useful},filter:{promise:!0,value:function(e,i){var n=this;s.attempt(function(i){i(null,t(n.ensure(e,"target"),n.fields,n.options))},i)}},sanitize:{promise:!0,value:function(t,i){var n=this;s.attempt(function(i){i(null,e(n.ensure(t,"target"),n.fields,n.options))},i)}},validate:{promise:!0,value:function(t,e){var n=this;s.attempt(function(e){e(null,i(n.ensure(t,"target"),n.fields,n.options))},e)}},ensure:{enumerable:!1,value:function(t,e){var i=this;switch(e){case"target":return s.isObject(t=JSON.parse(s.toJSON(t,i.options.useful)))?t:{};case"opt":return s.assign({},i.options,t);default:return t}}},fields:{set:function(t){return s.assign(t,s.zipObject(this.id,{type:"string"}))},validate:function(t){return s.isObject(t)}},id:{set:function(t){return this.id||t},validate:function(t){return s.isString(t,!0)}},sanitizers:{"static":!0,get:function(){return a}},strict:{set:function(t){return!!t}},types:{"static":!0,get:function(){return o}},useful:{set:function(t){return!!t}},validators:{"static":!0,get:function(){return l}}}),s.browserify(module.exports,"XPSchema")}();
},{"./filter":4,"./sanitize":6,"./validate":7,"expandjs":1,"xp-load":2}],6:[function(require,module,exports){
!function(){"use strict";var t=module.exports,e=require("xp-load"),i=e(require("expandjs"),"XP");t=module.exports=function(e,n,s,r){return i.isObject(n)?(i.forOwn(e,function(t,r){s.strict&&!i.has(n,r)&&delete e[r]}),i.forOwn(n,function(i,u){e[u]=t.sanitizeStep(e[u],n[u],n,s,(r?r+".":"")+u),s.useful&&null===e[u]&&delete e[u]}),e):e},t.sanitizeStep=function(e,n,s,r,u){return e=i.isDefined(e)?e:null,i.isObject(n)?(e=t.sanitizeValue(e,n,null,u),n.multi&&i.isArray(e)&&e.forEach(function(o,a){e[a]=t.sanitizeValue(o,n,a,u+"["+a+"]"),i.isObject(e[a])&&(n.fields||"recursive"===n.type)&&(e[a]=t(e[a],n.fields||s,i.assign({},r,{strict:n.strict}),u+"["+a+"]"))}),n.map&&i.isObject(e)&&(n.fields||"recursive"===n.type)&&(e=t(e,n.fields||s,i.assign({},r,{strict:n.strict}),u)),e):e},t.sanitizeValue=function(e,n,s,r){return e=i.isDefined(e)?e:null,i.isObject(n)?(i.isVoid(s)?e=(n.map?t.sanitizers.map:t.sanitizers.multi).method(e,n.multi,r):n.multi||(e=t.sanitizers.type.method(e,n.type,r)),i.forOwn(n,function(s,u){i.has(t.sanitizers,u)&&!i.includes(["map","multi","type"],u)&&(e=t.sanitizers[u].method(e,n[u],r))}),e):e},t.sanitizers={format:{options:i.formats,type:"string",method:function(t,e){return i.isString(t,!0)&&i.has(i,e)?i[e](t):t}},map:{method:function(t,e){return e?i.toObject(t,!0):t}},multi:{method:function(t,e){return e?i.toArray(t,!0):t}},type:{method:function(t,e){return"boolean"!==e?t:!!t}}}}();
},{"expandjs":1,"xp-load":2}],7:[function(require,module,exports){
!function(){"use strict";var t=module.exports,i=require("xp-load"),e=i(require("expandjs"),"XP");t=module.exports=function(i,n,r,u){return e.isObject(n)?(e.forOwn(n,function(e,s){t.validateStep(i[s],n[s],n,r,(u?u+".":"")+s)}),i):i},t.validateStep=function(i,n,r,u,s){return i=e.isDefined(i)?i:null,e.isObject(n)?(t.validateValue(i,n,null,s),n.multi&&e.isArray(i)&&i.forEach(function(i,o){t.validateValue(i,n,o,s+"["+o+"]"),e.isObject(i)&&(n.fields||"recursive"===n.type)&&t(i,n.fields||r,e.assign({},u,{strict:n.strict}),s+"["+o+"]")}),n.map&&e.isObject(i)&&(n.fields||"recursive"===n.type)&&t(i,n.fields||r,e.assign({},u,{strict:n.strict}),s),i):i},t.validateValue=function(i,n,r,u){var s;if(i=e.isDefined(i)?i:null,!e.isObject(n))return i;if(e.isVoid(r)){if(e.isError(s=(n.map?t.validators.map:t.validators.multi).method(i,n.multi,u)))throw s}else if(!n.multi&&e.isError(s=t.validators.type.method(i,n.type,u)))throw s;return e.forOwn(n,function(r,o){if(e.has(t.validators,o)&&!e.includes(["map","multi","type"],o)&&e.isError(s=t.validators[o].method(i,n[o],u)))throw s}),i},t.patterns={custom:{},stock:{}},t.types={any:e.isAny,"boolean":e.isBoolean,number:e.isFinite,object:e.isObject,recursive:e.isObject,string:e.isString},t.validators={multi:{input:"checkbox",method:function(t,i,n){return e.xor(i,e.isArray(t))?new e.ValidationError(n||"target","should be a multi"):null}},map:{input:"checkbox",multi:!0,method:function(t,i,n){return e.xor(i,e.isObject(t))?new e.ValidationError(n||"target","should be an map"):null}},exclusiveMaximum:{input:"number",type:"number",method:function(t,i,n){return e.isFinite(t)&&e.isFinite(i)?t>=i?new e.ValidationError(n||"target","should be less than "+i):null:!1}},exclusiveMinimum:{input:"number",type:"number",method:function(t,i,n){return e.isFinite(t)&&e.isFinite(i)?i>=t?new e.ValidationError(n||"target","should be greater than "+i):null:!1}},maximum:{input:"number",type:"number",method:function(t,i,n){return e.isFinite(t)&&e.isFinite(i)?t>i?new e.ValidationError(n||"target","should be a maximum of "+i):null:!1}},maxItems:{attributes:{min:1},input:"number",multi:!0,method:function(t,i,n){return!e.isArray(t)||!e.isFinite(i)||1>i?!1:t.length>i?new e.ValidationError(n||"target","should be a maximum of "+i+" items"):null}},maxLength:{attributes:{min:1},input:"number",type:"string",method:function(t,i,n){return!e.isString(t)||!e.isFinite(i)||1>i?!1:t.length>i?new e.ValidationError(n||"target","should be a maximum of "+i+" chars"):null}},minimum:{input:"number",type:"number",method:function(t,i,n){return e.isFinite(t)&&e.isFinite(i)?i>t?new e.ValidationError(n||"target","should be a minimum of "+i):null:!1}},minItems:{attributes:{min:1},input:"number",multi:!0,method:function(t,i,n){return e.isArray(t)&&e.isFinite(i)?t.length<i?new e.ValidationError(n||"target","should be a minimum of "+i+" items"):null:!1}},minLength:{attributes:{min:1},input:"number",type:"string",method:function(t,i,n){return e.isString(t)&&e.isFinite(i)?t.length<i?new e.ValidationError(n||"target","should be a minimum of "+i+" chars"):null:!1}},multipleOf:{input:"number",type:"number",method:function(t,i,n){return e.isFinite(t)&&e.isFinite(i)?t%i!==0?new e.ValidationError(n||"target","should be divisible by "+i):null:!1}},pattern:{input:"text",options:e.keys(t.patterns.stock),type:"string",method:function(i,n,r){var u=e.isString(i)&&e.isString(n,!0)?e.has(t.patterns.stock,n)?t.patterns.stock[n]:e.has(t.patterns.custom,n)?t.patterns.custom[n]:n:null;return e.isString(u)&&e.isRegExp(u=e.toRegExp(n))&&(t.patterns.custom[n]=u),u?u.test(i)?null:new e.InvalidError(r||"target"):!1}},required:{input:"checkbox",method:function(t,i,n){return i&&e.isEmpty(t)?new e.RequiredError(n||"target"):null}},type:{options:e.keys(t.types),required:!0,method:function(i,n,r){return!e.has(t.types,n||"any")||t.types[n||"any"](i)||e.isNull(i)?null:new e.ArgumentError(r,n||"any")}},uniqueItems:{input:"checkbox",multi:!0,method:function(t,i,n){return e.isArray(t)?i&&!e.isUniq(t)?new e.ValidationError(n||"target","should not have duplicates"):null:!1}}}}();
},{"expandjs":1,"xp-load":2}],8:[function(require,module,exports){
arguments[4][2][0].apply(exports,arguments)
},{"./lib":5,"dup":2}]},{},[8])


//# sourceMappingURL=xp-schema.min.map